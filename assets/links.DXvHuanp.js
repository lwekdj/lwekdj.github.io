import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.CB6SyYvB.js";import{t as y,j as F,_ as I,v as M}from"./app.Cp4uHSXK.js";import"./chunks/dayjs.DRNXKsfK.js";import{r as P,w as V,j as S,f as A,O as d,L as m,S as l,F as E,P as R,v as f,u as h,R as j,V as x,J as C,M as N,K as k,a1 as g,Q as O}from"./framework.DsqPfrbE.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.BntuGP0l.js";import"./chunks/vue-router.CcF8bV7z.js";import"./chunks/pinia.CG7N-epS.js";import"./chunks/vue-i18n.CfuUX5Lr.js";import"./chunks/nprogress.Y9-A6VbA.js";function T(e,r=!1){const s=P();return V(()=>e,async()=>{let o;if(typeof e=="string"){if(!y)return;o=await fetch(e).then(n=>n.json())||[]}else{if(!y){o=e;return}o=[];const n=async t=>{var _,c,a,p,v;try{const i=await fetch(t.rss);if(i.ok){const w=await i.text(),u=new DOMParser().parseFromString(w,"application/xml"),L=t.blog||((_=u.querySelector("title"))==null?void 0:_.textContent),b=t.name||((c=u.querySelector("author > name"))==null?void 0:c.textContent),$=(a=u.querySelector('link[rel="alternate"]'))==null?void 0:a.getAttribute("href"),q=t.desc||((p=u.querySelector("subtitle"))==null?void 0:p.textContent),B={avatar:t.avatar||((v=u.querySelector("logo"))==null?void 0:v.textContent),name:b,url:$,color:"#EE9CA7",blog:L,desc:q};o.push(B)}else console.error(`Failed to fetch XML from ${t.rss}:`,i.status,i.statusText)}catch(i){console.error(`Error fetching XML from ${t.rss}:`,i)}};await Promise.all(e.map(n))}s.value=r?Array.from(o).sort(()=>Math.random()-.5):o},{immediate:!0}),{data:s}}const X={class:"links"},J={class:"link-items"},K=["href","title"],Q={class:"link-left"},U={class:"link-info",m:"l-2"},z={class:"link-blog",font:"serif black"},G={class:"link-desc"},H=S({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(e){const r=e,s=F(),{data:o}=T(r.links,r.random),n=A(()=>{var t;return(t=s.value.ui.links)==null?void 0:t.image});return(t,_)=>{const c=I;return m(),d("div",X,[l("ul",J,[(m(!0),d(E,null,R(f(o),(a,p)=>(m(),d("li",{key:p,class:"link-item"},[l("a",{class:"link-url",p:"x-4 y-2",href:a.url,title:a.name,alt:"portrait",rel:"friend",target:"_blank"},[l("div",Q,[h(c,j({ref_for:!0},n.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:a.avatar,alt:a.name,"error-img":t.errorImg}),null,16,["src","alt","error-img"])]),l("div",U,[l("div",z,x(a.blog),1),l("div",G,x(a.desc),1)])],8,K)]))),128))])])}}}),W=C(H,[["__scopeId","data-v-c3b9397c"]]),Y=S({__name:"SakuraLinksLayout",setup(e){const r=M();return(s,o)=>{const n=W,t=N("RouterView"),_=D;return m(),k(_,null,{default:g(()=>[h(t,null,{default:g(({Component:c})=>[(m(),k(O(c),null,{"main-content":g(()=>[h(n,{links:f(r).links,random:f(r).random,"error-img":f(r).errorImg},null,8,["links","random","error-img"])]),_:1}))]),_:1})]),_:1})}}}),Z={};function tt(e,r){const s=Y;return m(),k(s)}const ut=C(Z,[["render",tt]]);export{ut as default};
