import{_ as x}from"./SakuraPage.vue_vue_type_style_index_0_lang.CB6SyYvB.js";import{_ as N}from"./SakuraPostList.De1CDP3L.js";import{b as j,c as D,i as O,u as T,e as U,a as F,d as M}from"./app.Cp4uHSXK.js";import{u as W,a as z}from"./chunks/vue-router.CcF8bV7z.js";import{r as B,j as $,f as S,p as J,M as R,O as l,L as t,F as k,S as _,X as b,V as C,v as d,P as q,K as g,a1 as y,u as h,J as Q,Q as X,Z as P}from"./framework.DsqPfrbE.js";import"./chunks/dayjs.DRNXKsfK.js";import{u as V}from"./chunks/vue-i18n.CfuUX5Lr.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.BntuGP0l.js";import"./SakuraPostDate.CfUoFoas.js";import"./chunks/pinia.CG7N-epS.js";import"./chunks/nprogress.Y9-A6VbA.js";function Z(m){const i=B(!1),{top:c}=j(m);return D(m,([{isIntersecting:a}])=>{i.value=a}),{show:()=>{i.value||window.scrollTo(0,c.value)}}}const G={class:"category-list-item inline-flex cursor-pointer items-center"},H={key:0,"i-ri-folder-add-line":""},Y={key:1,style:{color:"var(--sakura-c-primary)"},"i-ri-folder-reduce-line":""},I={key:0},ee={m:"l-1",font:"serif black"},te=$({__name:"SakuraCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(m){const i=m,c=W(),o=z(),a=S(()=>{const e=o.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),u=B(i.collapsable),{t:p}=V(),{locale:f}=V();function n(e){const s=f.value==="zh-CN"?"zh":f.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const v=B(),{show:w}=Z(v);function L(e){c.push({query:{category:e}}),w()}return J(()=>{const e=document.querySelector(".post-collapse-container");e&&(v.value=e)}),(e,s)=>{const A=R("SakuraCategory",!0),E=R("RouterLink");return t(),l(k,null,[_("li",G,[_("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=r=>u.value=!u.value)},[u.value?(t(),l("div",H)):(t(),l("div",Y))]),_("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=r=>L(e.parentKey))},C(e.category.name==="Uncategorized"?d(p)("category.uncategorized"):e.category.name)+" ["+C(e.category.total)+"] ",1)]),u.value?b("v-if",!0):(t(),l("ul",I,[(t(!0),l(k,null,q(e.category.children.values(),(r,K)=>(t(),l("li",{key:K,class:"sakura-sidebar-item",m:"l-4 y-1"},[d(O)(r)?(t(),g(A,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${r.name}`:r.name,category:r,collapsable:!a.value.includes(r.name)},null,8,["parent-key","category","collapsable"])):(t(),l(k,{key:1},[r.title?(t(),g(E,{key:0,to:r.path||"",class:"inline-flex items-center"},{default:y(()=>[s[2]||(s[2]=_("div",{"i-ri-file-text-line":""},null,-1)),_("span",ee,C(n(r)),1)]),_:2},1032,["to"])):b("v-if",!0)],64))]))),128))]))],64)}}}),oe=$({__name:"SakuraCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(m){const i=z(),c=S(()=>{const o=i.query.category||"";return Array.isArray(o)?[o]:o.split("/")});return(o,a)=>{const u=te;return t(!0),l(k,null,q(o.categories.values(),p=>(t(),l("ul",{key:p.name,class:"category-list",m:"l-4"},[h(u,{"parent-key":p.name,category:p,level:o.level+1,collapsable:!c.value.includes(p.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),ae=Q(oe,[["__scopeId","data-v-111676b2"]]),se={text:"center",class:"yun-text-light",p:"2"},ne={key:0},re=$({__name:"SakuraCategoriesLayout",setup(m){const i=T(),{t:c}=V(),o=z(),a=S(()=>o.query.category||""),u=U(),p=S(()=>i.postList.filter(n=>n.categories&&a.value!=="Uncategorized"?typeof n.categories=="string"?n.categories===a.value:n.categories.join("/").startsWith(a.value)&&n.categories[0]===a.value.split("/")[0]:!n.categories&&a.value==="Uncategorized"?n.categories===void 0:!1));return(f,n)=>{const v=ae,w=N,L=R("RouterView"),e=x;return t(),g(e,{class:"sakura-categories-page"},{default:y(()=>[h(L,null,{default:y(({Component:s})=>[(t(),g(X(s),null,{"main-content":y(()=>[P(f.$slots,"content",{},()=>[_("div",null,[_("div",se,C(d(c)("counter.categories",Array.from(d(u).children).length)),1),h(v,{categories:d(u).children},null,8,["categories"])])])]),"main-nav-before":y(()=>[P(f.$slots,"posts",{},()=>[a.value?(t(),l("div",ne,[h(w,{w:"full",posts:p.value},null,8,["posts"])])):b("v-if",!0),b(` <SakuraCard v-if="curCategory" class="post-collapse-container" m="t-4" w="full">
            <SakuraPostCollapse w="full" m="b-4" p="x-20 lt-sm:x-5" :posts="posts" />
          </SakuraCard> `)])]),_:3}))]),_:3})]),_:3})}}}),ve=$({__name:"categories",setup(m){return F([M({"@type":"CollectionPage"})]),(i,c)=>{const o=re;return t(),g(o)}}});export{ve as default};
